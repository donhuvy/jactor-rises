CREATE TABLE T_USER (
    ID            BIGINT GENERATED BY DEFAULT AS IDENTITY,
    CREATION_TIME TIMESTAMP,
    USER_NAME     VARCHAR(50) NOT NULL,
    PASSWORD      VARCHAR(250) NOT NULL,
    EMAIL         VARCHAR(50),
    PROFILE_ID    BIGINT,
    EMAIL_AS_NAME BOOLEAN NOT NULL
);

CREATE TABLE T_PROFILE (
    ID            BIGINT GENERATED BY DEFAULT AS IDENTITY,
    CREATION_TIME TIMESTAMP,
    DESCRIPTION   VARCHAR(250),
    USER_ID       BIGINT
);

ALTER TABLE T_USER
    ADD CONSTRAINT upid UNIQUE (ID);

ALTER TABLE T_USER
    ADD CONSTRAINT uname UNIQUE (USER_NAME);

ALTER TABLE T_PROFILE
    ADD CONSTRAINT uprid UNIQUE (ID);

ALTER TABLE T_USER
    ADD CONSTRAINT fk_prof FOREIGN KEY (PROFILE_ID)
    REFERENCES T_PROFILE (ID);
