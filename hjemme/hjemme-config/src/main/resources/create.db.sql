CREATE TABLE T_USER (
    ID            BIGINT GENERATED BY DEFAULT AS IDENTITY,
    CREATION_TIME TIMESTAMP,
    CREATED_BY    VARCHAR(50),
    USER_NAME     VARCHAR(50) NOT NULL,
    PASSWORD      VARCHAR(250) NOT NULL,
    EMAIL         VARCHAR(50),
    PROFILE_ID    BIGINT,
    EMAIL_AS_NAME BOOLEAN NOT NULL
);

CREATE TABLE T_PROFILE (
    ID            BIGINT GENERATED BY DEFAULT AS IDENTITY,
    CREATION_TIME TIMESTAMP,
    CREATED_BY    VARCHAR(50),
    DESCRIPTION   VARCHAR(250),
    USER_ID       BIGINT,
    ADDRESS_ID    BIGINT
);

CREATE TABLE T_ADDRESS (
    ID            BIGINT GENERATED BY DEFAULT AS IDENTITY,
    CREATION_TIME  TIMESTAMP,
    CREATED_BY     VARCHAR(50),
    ADDRESS_LINE_1 VARCHAR(50) NOT NULL,
    ADDRESS_LINE_2 VARCHAR(50),
    ADDRESS_LINE_3 VARCHAR(50),
    CITY           VARCHAR(50) NOT NULL,
    COUNTRY        VARCHAR(7),
    ZIP_CODE       INTEGER NOT NULL
);

ALTER TABLE T_USER
    ADD CONSTRAINT upid UNIQUE (ID);

ALTER TABLE T_USER
    ADD CONSTRAINT uname UNIQUE (USER_NAME);

ALTER TABLE T_PROFILE
    ADD CONSTRAINT uprid UNIQUE (ID);

ALTER TABLE T_ADDRESS
    ADD CONSTRAINT uaid UNIQUE (ID);

ALTER TABLE T_USER
    ADD CONSTRAINT fk_prof FOREIGN KEY (PROFILE_ID)
    REFERENCES T_PROFILE (ID);

ALTER TABLE T_PROFILE
    ADD CONSTRAINT fk_addr FOREIGN KEY (ADDRESS_ID)
    REFERENCES T_ADDRESS (ID);
